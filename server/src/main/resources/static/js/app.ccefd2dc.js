(function(){"use strict";var e={5394:function(e,t,n){var i=n(144),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("FileSharing")],1)},s=[],a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("header",[t("H2",[e._v("WELCOME TO ANGEYA'S FILE SHARING PLATFORM")])],1),t("div",{staticClass:"main-container"},[t("aside",[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":e.uploadSuccess,action:"api/file-service/upload"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("文件最大为4G")])]),t("el-input",{attrs:{type:"textarea",rows:3,autosize:"",placeholder:"请输入内容"},model:{value:e.tempText,callback:function(t){e.tempText=t},expression:"tempText"}}),t("el-button",{on:{click:function(t){return e.saveTempText(!1)}}},[e._v("Save")]),t("el-button",{on:{click:function(t){return e.saveTempText(!0)}}},[e._v("Clean")])],1),t("main",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fileList,height:"100%",border:""}},[t("el-table-column",{attrs:{prop:"name",label:"File Name",width:"200",align:"center"}}),t("el-table-column",{attrs:{prop:"size",label:"File Size",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(e.switchSizeUnit(n.row.size)))])]}}])}),t("el-table-column",{attrs:{prop:"dateTime",label:"Create Time",width:"300",align:"center"}}),t("el-table-column",{attrs:{prop:"",label:"Operation",width:"300"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{on:{click:function(t){return e.downloadFile(n.row.name)}}},[e._v("Download")]),t("el-button",{on:{click:function(t){return e.deleteFile(n.row.name)}}},[e._v("Delete")])]}}])})],1)],1)]),e._m(0),t("el-dialog",{attrs:{title:"登 录","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,visible:e.showLogin,width:"30%"},on:{"update:visible":function(t){e.showLogin=t}}},[t("el-input",{ref:"passwordInput",attrs:{placeholder:"请输入密码",type:"password",clearable:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("确 定")])],1)],1)],1)},r=[function(){var e=this,t=e._self._c;return t("footer",[t("p",[e._v("There is nothing in the footer!")])])}],l={GO_LOGIN:"goLogin"};n(7658);const c=new Map;var u={addEvent(e,t){if(c.has(e))c.get(e).push(t);else{const n=[];n.push(t),c.set(e,n)}},emit(e,t){if(c.has(e)){const n=c.get(e);n.forEach((e=>e(t)))}}};const d=1024,p=d*d,f=2;var h={name:"FileSharing",data(){return{tempText:"",fileList:[],showLogin:!0,password:""}},methods:{login(){this.axios.post("/file-service/login",this.password).then((e=>{e.data&&this.afterLogin()}))},afterLogin(){this.showLogin=!1,this.getTempText(),this.getFileList()},hasLogin(){this.axios.get("/file-service/has-login").then((e=>{e.data?this.afterLogin():(this.showLogin=!0,this.$nextTick((()=>{this.$refs.passwordInput.focus()})))}))},switchSizeUnit(e){let t;return t=e>p?`${(e/p).toFixed(f)} MB`:e>d?`${(e/d).toFixed(f)} KB`:`${e} B`,t},downloadFile(e){this.axios.get("/file-service/download-file",{responseType:"blob",params:{fileName:e}}).then((t=>{let n=new Blob([t.data]);if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,e);else{let t=(window.URL||window.webkitURL).createObjectURL(n),i=document.createElement("a");i.style.display="none",i.href=t,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(t)}}))},uploadSuccess(){this.getFileList()},deleteFile(e){this.$confirm(`确认删除文件 ${e} 吗?`,"提示",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then((()=>{this.axios.delete("/file-service/delete-file",{params:{fileName:e}}).then((e=>{e.data&&this.getFileList(),this.showOperateResult(e.data)}))}))},getTempText(){this.axios.get("/file-service/temp-text").then((e=>{this.tempText=e.data}))},saveTempText(e=!1){e&&(this.tempText=""),this.axios.put("/file-service/temp-text",{content:this.tempText}).then((e=>{}))},getFileList(){this.axios.get("/file-service/file-list").then((e=>{this.fileList=e.data}))},showOperateResult(e){e?this.$message.success("Operate success"):this.$message.success("Operate failed")},showLoginDialog(){this.showLogin=!0,this.$nextTick((()=>{this.$refs.passwordInput.focus()}))}},created(){u.addEvent(l.GO_LOGIN,this.showLoginDialog)},mounted(){this.hasLogin()}},v=h,m=n(1001),g=(0,m.Z)(v,a,r,!1,null,"e7745cc0",null),w=g.exports,b={name:"App",components:{FileSharing:w}},x=b,O=(0,m.Z)(x,o,s,!1,null,null,null),y=O.exports,L=n(8945),_=n(4720),T=n.n(_);i["default"].config.productionTip=!1;const k=L.Z.create({baseURL:"",crossDomain:!0});k.interceptors.response.use((e=>e.data===l.GO_LOGIN?(u.emit(l.GO_LOGIN),Promise.reject("you should login")):e),(e=>Promise.reject(e.response.data))),i["default"].prototype.axios=k,i["default"].use(T()),new i["default"]({render:e=>e(y)}).$mount("#app")}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,s){if(!i){var a=1/0;for(u=0;u<e.length;u++){i=e[u][0],o=e[u][1],s=e[u][2];for(var r=!0,l=0;l<i.length;l++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(r=!1,s<a&&(a=s));if(r){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[i,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,s,a=i[0],r=i[1],l=i[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(l)var u=l(n)}for(t&&t(i);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},i=self["webpackChunkweb"]=self["webpackChunkweb"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(5394)}));i=n.O(i)})();
//# sourceMappingURL=app.ccefd2dc.js.map